{"ast":null,"code":"import { Decoration, showPanel, EditorView, ViewPlugin, gutter, showTooltip, hoverTooltip, getPanel, logException, WidgetType, GutterMarker } from '@codemirror/view';\nimport { StateEffect, StateField, Facet, combineConfig, RangeSet, RangeSetBuilder } from '@codemirror/state';\nimport elt from 'crelt';\nclass SelectedDiagnostic {\n  constructor(from, to, diagnostic) {\n    this.from = from;\n    this.to = to;\n    this.diagnostic = diagnostic;\n  }\n}\nclass LintState {\n  constructor(diagnostics, panel, selected) {\n    this.diagnostics = diagnostics;\n    this.panel = panel;\n    this.selected = selected;\n  }\n  static init(diagnostics, panel, state) {\n    // Filter the list of diagnostics for which to create markers\n    let diagnosticFilter = state.facet(lintConfig).markerFilter;\n    if (diagnosticFilter) diagnostics = diagnosticFilter(diagnostics, state);\n    let sorted = diagnostics.slice().sort((a, b) => a.from - b.from || a.to - b.to);\n    let deco = new RangeSetBuilder(),\n      active = [],\n      pos = 0;\n    for (let i = 0;;) {\n      let next = i == sorted.length ? null : sorted[i];\n      if (!next && !active.length) break;\n      let from, to;\n      if (active.length) {\n        from = pos;\n        to = active.reduce((p, d) => Math.min(p, d.to), next && next.from > from ? next.from : 1e8);\n      } else {\n        from = next.from;\n        to = next.to;\n        active.push(next);\n        i++;\n      }\n      while (i < sorted.length) {\n        let next = sorted[i];\n        if (next.from == from && (next.to > next.from || next.to == from)) {\n          active.push(next);\n          i++;\n          to = Math.min(next.to, to);\n        } else {\n          to = Math.min(next.from, to);\n          break;\n        }\n      }\n      let sev = maxSeverity(active);\n      if (active.some(d => d.from == d.to || d.from == d.to - 1 && state.doc.lineAt(d.from).to == d.from)) {\n        deco.add(from, from, Decoration.widget({\n          widget: new DiagnosticWidget(sev),\n          diagnostics: active.slice()\n        }));\n      } else {\n        let markClass = active.reduce((c, d) => d.markClass ? c + \" \" + d.markClass : c, \"\");\n        deco.add(from, to, Decoration.mark({\n          class: \"cm-lintRange cm-lintRange-\" + sev + markClass,\n          diagnostics: active.slice(),\n          inclusiveEnd: active.some(a => a.to > to)\n        }));\n      }\n      pos = to;\n      for (let i = 0; i < active.length; i++) if (active[i].to <= pos) active.splice(i--, 1);\n    }\n    let set = deco.finish();\n    return new LintState(set, panel, findDiagnostic(set));\n  }\n}\nfunction findDiagnostic(diagnostics) {\n  let diagnostic = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  let after = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  let found = null;\n  diagnostics.between(after, 1e9, (from, to, _ref) => {\n    let {\n      spec\n    } = _ref;\n    if (diagnostic && spec.diagnostics.indexOf(diagnostic) < 0) return;\n    if (!found) found = new SelectedDiagnostic(from, to, diagnostic || spec.diagnostics[0]);else if (spec.diagnostics.indexOf(found.diagnostic) < 0) return false;else found = new SelectedDiagnostic(found.from, to, found.diagnostic);\n  });\n  return found;\n}\nfunction hideTooltip(tr, tooltip) {\n  let from = tooltip.pos,\n    to = tooltip.end || from;\n  let result = tr.state.facet(lintConfig).hideOn(tr, from, to);\n  if (result != null) return result;\n  let line = tr.startState.doc.lineAt(tooltip.pos);\n  return !!(tr.effects.some(e => e.is(setDiagnosticsEffect)) || tr.changes.touchesRange(line.from, Math.max(line.to, to)));\n}\nfunction maybeEnableLint(state, effects) {\n  return state.field(lintState, false) ? effects : effects.concat(StateEffect.appendConfig.of(lintExtensions));\n}\n/**\nReturns a transaction spec which updates the current set of\ndiagnostics, and enables the lint extension if if wasn't already\nactive.\n*/\nfunction setDiagnostics(state, diagnostics) {\n  return {\n    effects: maybeEnableLint(state, [setDiagnosticsEffect.of(diagnostics)])\n  };\n}\n/**\nThe state effect that updates the set of active diagnostics. Can\nbe useful when writing an extension that needs to track these.\n*/\nconst setDiagnosticsEffect = /*@__PURE__*/StateEffect.define();\nconst togglePanel = /*@__PURE__*/StateEffect.define();\nconst movePanelSelection = /*@__PURE__*/StateEffect.define();\nconst lintState = /*@__PURE__*/StateField.define({\n  create() {\n    return new LintState(Decoration.none, null, null);\n  },\n  update(value, tr) {\n    if (tr.docChanged && value.diagnostics.size) {\n      let mapped = value.diagnostics.map(tr.changes),\n        selected = null,\n        panel = value.panel;\n      if (value.selected) {\n        let selPos = tr.changes.mapPos(value.selected.from, 1);\n        selected = findDiagnostic(mapped, value.selected.diagnostic, selPos) || findDiagnostic(mapped, null, selPos);\n      }\n      if (!mapped.size && panel && tr.state.facet(lintConfig).autoPanel) panel = null;\n      value = new LintState(mapped, panel, selected);\n    }\n    for (let effect of tr.effects) {\n      if (effect.is(setDiagnosticsEffect)) {\n        let panel = !tr.state.facet(lintConfig).autoPanel ? value.panel : effect.value.length ? LintPanel.open : null;\n        value = LintState.init(effect.value, panel, tr.state);\n      } else if (effect.is(togglePanel)) {\n        value = new LintState(value.diagnostics, effect.value ? LintPanel.open : null, value.selected);\n      } else if (effect.is(movePanelSelection)) {\n        value = new LintState(value.diagnostics, value.panel, effect.value);\n      }\n    }\n    return value;\n  },\n  provide: f => [showPanel.from(f, val => val.panel), EditorView.decorations.from(f, s => s.diagnostics)]\n});\n/**\nReturns the number of active lint diagnostics in the given state.\n*/\nfunction diagnosticCount(state) {\n  let lint = state.field(lintState, false);\n  return lint ? lint.diagnostics.size : 0;\n}\nconst activeMark = /*@__PURE__*/Decoration.mark({\n  class: \"cm-lintRange cm-lintRange-active\"\n});\nfunction lintTooltip(view, pos, side) {\n  let {\n    diagnostics\n  } = view.state.field(lintState);\n  let found,\n    start = -1,\n    end = -1;\n  diagnostics.between(pos - (side < 0 ? 1 : 0), pos + (side > 0 ? 1 : 0), (from, to, _ref2) => {\n    let {\n      spec\n    } = _ref2;\n    if (pos >= from && pos <= to && (from == to || (pos > from || side > 0) && (pos < to || side < 0))) {\n      found = spec.diagnostics;\n      start = from;\n      end = to;\n      return false;\n    }\n  });\n  let diagnosticFilter = view.state.facet(lintConfig).tooltipFilter;\n  if (found && diagnosticFilter) found = diagnosticFilter(found, view.state);\n  if (!found) return null;\n  return {\n    pos: start,\n    end: end,\n    above: view.state.doc.lineAt(start).to < end,\n    create() {\n      return {\n        dom: diagnosticsTooltip(view, found)\n      };\n    }\n  };\n}\nfunction diagnosticsTooltip(view, diagnostics) {\n  return elt(\"ul\", {\n    class: \"cm-tooltip-lint\"\n  }, diagnostics.map(d => renderDiagnostic(view, d, false)));\n}\n/**\nCommand to open and focus the lint panel.\n*/\nconst openLintPanel = view => {\n  let field = view.state.field(lintState, false);\n  if (!field || !field.panel) view.dispatch({\n    effects: maybeEnableLint(view.state, [togglePanel.of(true)])\n  });\n  let panel = getPanel(view, LintPanel.open);\n  if (panel) panel.dom.querySelector(\".cm-panel-lint ul\").focus();\n  return true;\n};\n/**\nCommand to close the lint panel, when open.\n*/\nconst closeLintPanel = view => {\n  let field = view.state.field(lintState, false);\n  if (!field || !field.panel) return false;\n  view.dispatch({\n    effects: togglePanel.of(false)\n  });\n  return true;\n};\n/**\nMove the selection to the next diagnostic.\n*/\nconst nextDiagnostic = view => {\n  let field = view.state.field(lintState, false);\n  if (!field) return false;\n  let sel = view.state.selection.main,\n    next = field.diagnostics.iter(sel.to + 1);\n  if (!next.value) {\n    next = field.diagnostics.iter(0);\n    if (!next.value || next.from == sel.from && next.to == sel.to) return false;\n  }\n  view.dispatch({\n    selection: {\n      anchor: next.from,\n      head: next.to\n    },\n    scrollIntoView: true\n  });\n  return true;\n};\n/**\nMove the selection to the previous diagnostic.\n*/\nconst previousDiagnostic = view => {\n  let {\n      state\n    } = view,\n    field = state.field(lintState, false);\n  if (!field) return false;\n  let sel = state.selection.main;\n  let prevFrom, prevTo, lastFrom, lastTo;\n  field.diagnostics.between(0, state.doc.length, (from, to) => {\n    if (to < sel.to && (prevFrom == null || prevFrom < from)) {\n      prevFrom = from;\n      prevTo = to;\n    }\n    if (lastFrom == null || from > lastFrom) {\n      lastFrom = from;\n      lastTo = to;\n    }\n  });\n  if (lastFrom == null || prevFrom == null && lastFrom == sel.from) return false;\n  view.dispatch({\n    selection: {\n      anchor: prevFrom !== null && prevFrom !== void 0 ? prevFrom : lastFrom,\n      head: prevTo !== null && prevTo !== void 0 ? prevTo : lastTo\n    },\n    scrollIntoView: true\n  });\n  return true;\n};\n/**\nA set of default key bindings for the lint functionality.\n\n- Ctrl-Shift-m (Cmd-Shift-m on macOS): [`openLintPanel`](https://codemirror.net/6/docs/ref/#lint.openLintPanel)\n- F8: [`nextDiagnostic`](https://codemirror.net/6/docs/ref/#lint.nextDiagnostic)\n*/\nconst lintKeymap = [{\n  key: \"Mod-Shift-m\",\n  run: openLintPanel,\n  preventDefault: true\n}, {\n  key: \"F8\",\n  run: nextDiagnostic\n}];\nconst lintPlugin = /*@__PURE__*/ViewPlugin.fromClass(class {\n  constructor(view) {\n    this.view = view;\n    this.timeout = -1;\n    this.set = true;\n    let {\n      delay\n    } = view.state.facet(lintConfig);\n    this.lintTime = Date.now() + delay;\n    this.run = this.run.bind(this);\n    this.timeout = setTimeout(this.run, delay);\n  }\n  run() {\n    clearTimeout(this.timeout);\n    let now = Date.now();\n    if (now < this.lintTime - 10) {\n      this.timeout = setTimeout(this.run, this.lintTime - now);\n    } else {\n      this.set = false;\n      let {\n          state\n        } = this.view,\n        {\n          sources\n        } = state.facet(lintConfig);\n      if (sources.length) batchResults(sources.map(s => Promise.resolve(s(this.view))), annotations => {\n        if (this.view.state.doc == state.doc) this.view.dispatch(setDiagnostics(this.view.state, annotations.reduce((a, b) => a.concat(b))));\n      }, error => {\n        logException(this.view.state, error);\n      });\n    }\n  }\n  update(update) {\n    let config = update.state.facet(lintConfig);\n    if (update.docChanged || config != update.startState.facet(lintConfig) || config.needsRefresh && config.needsRefresh(update)) {\n      this.lintTime = Date.now() + config.delay;\n      if (!this.set) {\n        this.set = true;\n        this.timeout = setTimeout(this.run, config.delay);\n      }\n    }\n  }\n  force() {\n    if (this.set) {\n      this.lintTime = Date.now();\n      this.run();\n    }\n  }\n  destroy() {\n    clearTimeout(this.timeout);\n  }\n});\nfunction batchResults(promises, sink, error) {\n  let collected = [],\n    timeout = -1;\n  for (let p of promises) p.then(value => {\n    collected.push(value);\n    clearTimeout(timeout);\n    if (collected.length == promises.length) sink(collected);else timeout = setTimeout(() => sink(collected), 200);\n  }, error);\n}\nconst lintConfig = /*@__PURE__*/Facet.define({\n  combine(input) {\n    return Object.assign({\n      sources: input.map(i => i.source).filter(x => x != null)\n    }, combineConfig(input.map(i => i.config), {\n      delay: 750,\n      markerFilter: null,\n      tooltipFilter: null,\n      needsRefresh: null,\n      hideOn: () => null\n    }, {\n      needsRefresh: (a, b) => !a ? b : !b ? a : u => a(u) || b(u)\n    }));\n  }\n});\n/**\nGiven a diagnostic source, this function returns an extension that\nenables linting with that source. It will be called whenever the\neditor is idle (after its content changed). If `null` is given as\nsource, this only configures the lint extension.\n*/\nfunction linter(source) {\n  let config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return [lintConfig.of({\n    source,\n    config\n  }), lintPlugin, lintExtensions];\n}\n/**\nForces any linters [configured](https://codemirror.net/6/docs/ref/#lint.linter) to run when the\neditor is idle to run right away.\n*/\nfunction forceLinting(view) {\n  let plugin = view.plugin(lintPlugin);\n  if (plugin) plugin.force();\n}\nfunction assignKeys(actions) {\n  let assigned = [];\n  if (actions) actions: for (let {\n    name\n  } of actions) {\n    for (let i = 0; i < name.length; i++) {\n      let ch = name[i];\n      if (/[a-zA-Z]/.test(ch) && !assigned.some(c => c.toLowerCase() == ch.toLowerCase())) {\n        assigned.push(ch);\n        continue actions;\n      }\n    }\n    assigned.push(\"\");\n  }\n  return assigned;\n}\nfunction renderDiagnostic(view, diagnostic, inPanel) {\n  var _a;\n  let keys = inPanel ? assignKeys(diagnostic.actions) : [];\n  return elt(\"li\", {\n    class: \"cm-diagnostic cm-diagnostic-\" + diagnostic.severity\n  }, elt(\"span\", {\n    class: \"cm-diagnosticText\"\n  }, diagnostic.renderMessage ? diagnostic.renderMessage(view) : diagnostic.message), (_a = diagnostic.actions) === null || _a === void 0 ? void 0 : _a.map((action, i) => {\n    let fired = false,\n      click = e => {\n        e.preventDefault();\n        if (fired) return;\n        fired = true;\n        let found = findDiagnostic(view.state.field(lintState).diagnostics, diagnostic);\n        if (found) action.apply(view, found.from, found.to);\n      };\n    let {\n        name\n      } = action,\n      keyIndex = keys[i] ? name.indexOf(keys[i]) : -1;\n    let nameElt = keyIndex < 0 ? name : [name.slice(0, keyIndex), elt(\"u\", name.slice(keyIndex, keyIndex + 1)), name.slice(keyIndex + 1)];\n    return elt(\"button\", {\n      type: \"button\",\n      class: \"cm-diagnosticAction\",\n      onclick: click,\n      onmousedown: click,\n      \"aria-label\": \" Action: \".concat(name).concat(keyIndex < 0 ? \"\" : \" (access key \\\"\".concat(keys[i], \")\\\"\"), \".\")\n    }, nameElt);\n  }), diagnostic.source && elt(\"div\", {\n    class: \"cm-diagnosticSource\"\n  }, diagnostic.source));\n}\nclass DiagnosticWidget extends WidgetType {\n  constructor(sev) {\n    super();\n    this.sev = sev;\n  }\n  eq(other) {\n    return other.sev == this.sev;\n  }\n  toDOM() {\n    return elt(\"span\", {\n      class: \"cm-lintPoint cm-lintPoint-\" + this.sev\n    });\n  }\n}\nclass PanelItem {\n  constructor(view, diagnostic) {\n    this.diagnostic = diagnostic;\n    this.id = \"item_\" + Math.floor(Math.random() * 0xffffffff).toString(16);\n    this.dom = renderDiagnostic(view, diagnostic, true);\n    this.dom.id = this.id;\n    this.dom.setAttribute(\"role\", \"option\");\n  }\n}\nclass LintPanel {\n  constructor(view) {\n    this.view = view;\n    this.items = [];\n    let onkeydown = event => {\n      if (event.keyCode == 27) {\n        // Escape\n        closeLintPanel(this.view);\n        this.view.focus();\n      } else if (event.keyCode == 38 || event.keyCode == 33) {\n        // ArrowUp, PageUp\n        this.moveSelection((this.selectedIndex - 1 + this.items.length) % this.items.length);\n      } else if (event.keyCode == 40 || event.keyCode == 34) {\n        // ArrowDown, PageDown\n        this.moveSelection((this.selectedIndex + 1) % this.items.length);\n      } else if (event.keyCode == 36) {\n        // Home\n        this.moveSelection(0);\n      } else if (event.keyCode == 35) {\n        // End\n        this.moveSelection(this.items.length - 1);\n      } else if (event.keyCode == 13) {\n        // Enter\n        this.view.focus();\n      } else if (event.keyCode >= 65 && event.keyCode <= 90 && this.selectedIndex >= 0) {\n        // A-Z\n        let {\n            diagnostic\n          } = this.items[this.selectedIndex],\n          keys = assignKeys(diagnostic.actions);\n        for (let i = 0; i < keys.length; i++) if (keys[i].toUpperCase().charCodeAt(0) == event.keyCode) {\n          let found = findDiagnostic(this.view.state.field(lintState).diagnostics, diagnostic);\n          if (found) diagnostic.actions[i].apply(view, found.from, found.to);\n        }\n      } else {\n        return;\n      }\n      event.preventDefault();\n    };\n    let onclick = event => {\n      for (let i = 0; i < this.items.length; i++) {\n        if (this.items[i].dom.contains(event.target)) this.moveSelection(i);\n      }\n    };\n    this.list = elt(\"ul\", {\n      tabIndex: 0,\n      role: \"listbox\",\n      \"aria-label\": this.view.state.phrase(\"Diagnostics\"),\n      onkeydown,\n      onclick\n    });\n    this.dom = elt(\"div\", {\n      class: \"cm-panel-lint\"\n    }, this.list, elt(\"button\", {\n      type: \"button\",\n      name: \"close\",\n      \"aria-label\": this.view.state.phrase(\"close\"),\n      onclick: () => closeLintPanel(this.view)\n    }, \"×\"));\n    this.update();\n  }\n  get selectedIndex() {\n    let selected = this.view.state.field(lintState).selected;\n    if (!selected) return -1;\n    for (let i = 0; i < this.items.length; i++) if (this.items[i].diagnostic == selected.diagnostic) return i;\n    return -1;\n  }\n  update() {\n    let {\n      diagnostics,\n      selected\n    } = this.view.state.field(lintState);\n    let i = 0,\n      needsSync = false,\n      newSelectedItem = null;\n    let seen = new Set();\n    diagnostics.between(0, this.view.state.doc.length, (_start, _end, _ref3) => {\n      let {\n        spec\n      } = _ref3;\n      for (let diagnostic of spec.diagnostics) {\n        if (seen.has(diagnostic)) continue;\n        seen.add(diagnostic);\n        let found = -1,\n          item;\n        for (let j = i; j < this.items.length; j++) if (this.items[j].diagnostic == diagnostic) {\n          found = j;\n          break;\n        }\n        if (found < 0) {\n          item = new PanelItem(this.view, diagnostic);\n          this.items.splice(i, 0, item);\n          needsSync = true;\n        } else {\n          item = this.items[found];\n          if (found > i) {\n            this.items.splice(i, found - i);\n            needsSync = true;\n          }\n        }\n        if (selected && item.diagnostic == selected.diagnostic) {\n          if (!item.dom.hasAttribute(\"aria-selected\")) {\n            item.dom.setAttribute(\"aria-selected\", \"true\");\n            newSelectedItem = item;\n          }\n        } else if (item.dom.hasAttribute(\"aria-selected\")) {\n          item.dom.removeAttribute(\"aria-selected\");\n        }\n        i++;\n      }\n    });\n    while (i < this.items.length && !(this.items.length == 1 && this.items[0].diagnostic.from < 0)) {\n      needsSync = true;\n      this.items.pop();\n    }\n    if (this.items.length == 0) {\n      this.items.push(new PanelItem(this.view, {\n        from: -1,\n        to: -1,\n        severity: \"info\",\n        message: this.view.state.phrase(\"No diagnostics\")\n      }));\n      needsSync = true;\n    }\n    if (newSelectedItem) {\n      this.list.setAttribute(\"aria-activedescendant\", newSelectedItem.id);\n      this.view.requestMeasure({\n        key: this,\n        read: () => ({\n          sel: newSelectedItem.dom.getBoundingClientRect(),\n          panel: this.list.getBoundingClientRect()\n        }),\n        write: _ref4 => {\n          let {\n            sel,\n            panel\n          } = _ref4;\n          let scaleY = panel.height / this.list.offsetHeight;\n          if (sel.top < panel.top) this.list.scrollTop -= (panel.top - sel.top) / scaleY;else if (sel.bottom > panel.bottom) this.list.scrollTop += (sel.bottom - panel.bottom) / scaleY;\n        }\n      });\n    } else if (this.selectedIndex < 0) {\n      this.list.removeAttribute(\"aria-activedescendant\");\n    }\n    if (needsSync) this.sync();\n  }\n  sync() {\n    let domPos = this.list.firstChild;\n    function rm() {\n      let prev = domPos;\n      domPos = prev.nextSibling;\n      prev.remove();\n    }\n    for (let item of this.items) {\n      if (item.dom.parentNode == this.list) {\n        while (domPos != item.dom) rm();\n        domPos = item.dom.nextSibling;\n      } else {\n        this.list.insertBefore(item.dom, domPos);\n      }\n    }\n    while (domPos) rm();\n  }\n  moveSelection(selectedIndex) {\n    if (this.selectedIndex < 0) return;\n    let field = this.view.state.field(lintState);\n    let selection = findDiagnostic(field.diagnostics, this.items[selectedIndex].diagnostic);\n    if (!selection) return;\n    this.view.dispatch({\n      selection: {\n        anchor: selection.from,\n        head: selection.to\n      },\n      scrollIntoView: true,\n      effects: movePanelSelection.of(selection)\n    });\n  }\n  static open(view) {\n    return new LintPanel(view);\n  }\n}\nfunction svg(content) {\n  let attrs = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"viewBox=\\\"0 0 40 40\\\"\";\n  return \"url('data:image/svg+xml,<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" \".concat(attrs, \">\").concat(encodeURIComponent(content), \"</svg>')\");\n}\nfunction underline(color) {\n  return svg(\"<path d=\\\"m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0\\\" stroke=\\\"\".concat(color, \"\\\" fill=\\\"none\\\" stroke-width=\\\".7\\\"/>\"), \"width=\\\"6\\\" height=\\\"3\\\"\");\n}\nconst baseTheme = /*@__PURE__*/EditorView.baseTheme({\n  \".cm-diagnostic\": {\n    padding: \"3px 6px 3px 8px\",\n    marginLeft: \"-1px\",\n    display: \"block\",\n    whiteSpace: \"pre-wrap\"\n  },\n  \".cm-diagnostic-error\": {\n    borderLeft: \"5px solid #d11\"\n  },\n  \".cm-diagnostic-warning\": {\n    borderLeft: \"5px solid orange\"\n  },\n  \".cm-diagnostic-info\": {\n    borderLeft: \"5px solid #999\"\n  },\n  \".cm-diagnostic-hint\": {\n    borderLeft: \"5px solid #66d\"\n  },\n  \".cm-diagnosticAction\": {\n    font: \"inherit\",\n    border: \"none\",\n    padding: \"2px 4px\",\n    backgroundColor: \"#444\",\n    color: \"white\",\n    borderRadius: \"3px\",\n    marginLeft: \"8px\",\n    cursor: \"pointer\"\n  },\n  \".cm-diagnosticSource\": {\n    fontSize: \"70%\",\n    opacity: .7\n  },\n  \".cm-lintRange\": {\n    backgroundPosition: \"left bottom\",\n    backgroundRepeat: \"repeat-x\",\n    paddingBottom: \"0.7px\"\n  },\n  \".cm-lintRange-error\": {\n    backgroundImage: /*@__PURE__*/underline(\"#d11\")\n  },\n  \".cm-lintRange-warning\": {\n    backgroundImage: /*@__PURE__*/underline(\"orange\")\n  },\n  \".cm-lintRange-info\": {\n    backgroundImage: /*@__PURE__*/underline(\"#999\")\n  },\n  \".cm-lintRange-hint\": {\n    backgroundImage: /*@__PURE__*/underline(\"#66d\")\n  },\n  \".cm-lintRange-active\": {\n    backgroundColor: \"#ffdd9980\"\n  },\n  \".cm-tooltip-lint\": {\n    padding: 0,\n    margin: 0\n  },\n  \".cm-lintPoint\": {\n    position: \"relative\",\n    \"&:after\": {\n      content: '\"\"',\n      position: \"absolute\",\n      bottom: 0,\n      left: \"-2px\",\n      borderLeft: \"3px solid transparent\",\n      borderRight: \"3px solid transparent\",\n      borderBottom: \"4px solid #d11\"\n    }\n  },\n  \".cm-lintPoint-warning\": {\n    \"&:after\": {\n      borderBottomColor: \"orange\"\n    }\n  },\n  \".cm-lintPoint-info\": {\n    \"&:after\": {\n      borderBottomColor: \"#999\"\n    }\n  },\n  \".cm-lintPoint-hint\": {\n    \"&:after\": {\n      borderBottomColor: \"#66d\"\n    }\n  },\n  \".cm-panel.cm-panel-lint\": {\n    position: \"relative\",\n    \"& ul\": {\n      maxHeight: \"100px\",\n      overflowY: \"auto\",\n      \"& [aria-selected]\": {\n        backgroundColor: \"#ddd\",\n        \"& u\": {\n          textDecoration: \"underline\"\n        }\n      },\n      \"&:focus [aria-selected]\": {\n        background_fallback: \"#bdf\",\n        backgroundColor: \"Highlight\",\n        color_fallback: \"white\",\n        color: \"HighlightText\"\n      },\n      \"& u\": {\n        textDecoration: \"none\"\n      },\n      padding: 0,\n      margin: 0\n    },\n    \"& [name=close]\": {\n      position: \"absolute\",\n      top: \"0\",\n      right: \"2px\",\n      background: \"inherit\",\n      border: \"none\",\n      font: \"inherit\",\n      padding: 0,\n      margin: 0\n    }\n  }\n});\nfunction severityWeight(sev) {\n  return sev == \"error\" ? 4 : sev == \"warning\" ? 3 : sev == \"info\" ? 2 : 1;\n}\nfunction maxSeverity(diagnostics) {\n  let sev = \"hint\",\n    weight = 1;\n  for (let d of diagnostics) {\n    let w = severityWeight(d.severity);\n    if (w > weight) {\n      weight = w;\n      sev = d.severity;\n    }\n  }\n  return sev;\n}\nclass LintGutterMarker extends GutterMarker {\n  constructor(diagnostics) {\n    super();\n    this.diagnostics = diagnostics;\n    this.severity = maxSeverity(diagnostics);\n  }\n  toDOM(view) {\n    let elt = document.createElement(\"div\");\n    elt.className = \"cm-lint-marker cm-lint-marker-\" + this.severity;\n    let diagnostics = this.diagnostics;\n    let diagnosticsFilter = view.state.facet(lintGutterConfig).tooltipFilter;\n    if (diagnosticsFilter) diagnostics = diagnosticsFilter(diagnostics, view.state);\n    if (diagnostics.length) elt.onmouseover = () => gutterMarkerMouseOver(view, elt, diagnostics);\n    return elt;\n  }\n}\nfunction trackHoverOn(view, marker) {\n  let mousemove = event => {\n    let rect = marker.getBoundingClientRect();\n    if (event.clientX > rect.left - 10 /* Hover.Margin */ && event.clientX < rect.right + 10 /* Hover.Margin */ && event.clientY > rect.top - 10 /* Hover.Margin */ && event.clientY < rect.bottom + 10 /* Hover.Margin */) return;\n    for (let target = event.target; target; target = target.parentNode) {\n      if (target.nodeType == 1 && target.classList.contains(\"cm-tooltip-lint\")) return;\n    }\n    window.removeEventListener(\"mousemove\", mousemove);\n    if (view.state.field(lintGutterTooltip)) view.dispatch({\n      effects: setLintGutterTooltip.of(null)\n    });\n  };\n  window.addEventListener(\"mousemove\", mousemove);\n}\nfunction gutterMarkerMouseOver(view, marker, diagnostics) {\n  function hovered() {\n    let line = view.elementAtHeight(marker.getBoundingClientRect().top + 5 - view.documentTop);\n    const linePos = view.coordsAtPos(line.from);\n    if (linePos) {\n      view.dispatch({\n        effects: setLintGutterTooltip.of({\n          pos: line.from,\n          above: false,\n          clip: false,\n          create() {\n            return {\n              dom: diagnosticsTooltip(view, diagnostics),\n              getCoords: () => marker.getBoundingClientRect()\n            };\n          }\n        })\n      });\n    }\n    marker.onmouseout = marker.onmousemove = null;\n    trackHoverOn(view, marker);\n  }\n  let {\n    hoverTime\n  } = view.state.facet(lintGutterConfig);\n  let hoverTimeout = setTimeout(hovered, hoverTime);\n  marker.onmouseout = () => {\n    clearTimeout(hoverTimeout);\n    marker.onmouseout = marker.onmousemove = null;\n  };\n  marker.onmousemove = () => {\n    clearTimeout(hoverTimeout);\n    hoverTimeout = setTimeout(hovered, hoverTime);\n  };\n}\nfunction markersForDiagnostics(doc, diagnostics) {\n  let byLine = Object.create(null);\n  for (let diagnostic of diagnostics) {\n    let line = doc.lineAt(diagnostic.from);\n    (byLine[line.from] || (byLine[line.from] = [])).push(diagnostic);\n  }\n  let markers = [];\n  for (let line in byLine) {\n    markers.push(new LintGutterMarker(byLine[line]).range(+line));\n  }\n  return RangeSet.of(markers, true);\n}\nconst lintGutterExtension = /*@__PURE__*/gutter({\n  class: \"cm-gutter-lint\",\n  markers: view => view.state.field(lintGutterMarkers),\n  widgetMarker: (view, widget, block) => {\n    let diagnostics = [];\n    view.state.field(lintGutterMarkers).between(block.from, block.to, (from, to, value) => {\n      if (from > block.from && from < block.to) diagnostics.push(...value.diagnostics);\n    });\n    return diagnostics.length ? new LintGutterMarker(diagnostics) : null;\n  }\n});\nconst lintGutterMarkers = /*@__PURE__*/StateField.define({\n  create() {\n    return RangeSet.empty;\n  },\n  update(markers, tr) {\n    markers = markers.map(tr.changes);\n    let diagnosticFilter = tr.state.facet(lintGutterConfig).markerFilter;\n    for (let effect of tr.effects) {\n      if (effect.is(setDiagnosticsEffect)) {\n        let diagnostics = effect.value;\n        if (diagnosticFilter) diagnostics = diagnosticFilter(diagnostics || [], tr.state);\n        markers = markersForDiagnostics(tr.state.doc, diagnostics.slice(0));\n      }\n    }\n    return markers;\n  }\n});\nconst setLintGutterTooltip = /*@__PURE__*/StateEffect.define();\nconst lintGutterTooltip = /*@__PURE__*/StateField.define({\n  create() {\n    return null;\n  },\n  update(tooltip, tr) {\n    if (tooltip && tr.docChanged) tooltip = hideTooltip(tr, tooltip) ? null : Object.assign(Object.assign({}, tooltip), {\n      pos: tr.changes.mapPos(tooltip.pos)\n    });\n    return tr.effects.reduce((t, e) => e.is(setLintGutterTooltip) ? e.value : t, tooltip);\n  },\n  provide: field => showTooltip.from(field)\n});\nconst lintGutterTheme = /*@__PURE__*/EditorView.baseTheme({\n  \".cm-gutter-lint\": {\n    width: \"1.4em\",\n    \"& .cm-gutterElement\": {\n      padding: \".2em\"\n    }\n  },\n  \".cm-lint-marker\": {\n    width: \"1em\",\n    height: \"1em\"\n  },\n  \".cm-lint-marker-info\": {\n    content: /*@__PURE__*/svg(\"<path fill=\\\"#aaf\\\" stroke=\\\"#77e\\\" stroke-width=\\\"6\\\" stroke-linejoin=\\\"round\\\" d=\\\"M5 5L35 5L35 35L5 35Z\\\"/>\")\n  },\n  \".cm-lint-marker-warning\": {\n    content: /*@__PURE__*/svg(\"<path fill=\\\"#fe8\\\" stroke=\\\"#fd7\\\" stroke-width=\\\"6\\\" stroke-linejoin=\\\"round\\\" d=\\\"M20 6L37 35L3 35Z\\\"/>\")\n  },\n  \".cm-lint-marker-error\": {\n    content: /*@__PURE__*/svg(\"<circle cx=\\\"20\\\" cy=\\\"20\\\" r=\\\"15\\\" fill=\\\"#f87\\\" stroke=\\\"#f43\\\" stroke-width=\\\"6\\\"/>\")\n  }\n});\nconst lintExtensions = [lintState, /*@__PURE__*/EditorView.decorations.compute([lintState], state => {\n  let {\n    selected,\n    panel\n  } = state.field(lintState);\n  return !selected || !panel || selected.from == selected.to ? Decoration.none : Decoration.set([activeMark.range(selected.from, selected.to)]);\n}), /*@__PURE__*/hoverTooltip(lintTooltip, {\n  hideOn: hideTooltip\n}), baseTheme];\nconst lintGutterConfig = /*@__PURE__*/Facet.define({\n  combine(configs) {\n    return combineConfig(configs, {\n      hoverTime: 300 /* Hover.Time */,\n      markerFilter: null,\n      tooltipFilter: null\n    });\n  }\n});\n/**\nReturns an extension that installs a gutter showing markers for\neach line that has diagnostics, which can be hovered over to see\nthe diagnostics.\n*/\nfunction lintGutter() {\n  let config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return [lintGutterConfig.of(config), lintGutterMarkers, lintGutterExtension, lintGutterTheme, lintGutterTooltip];\n}\n/**\nIterate over the marked diagnostics for the given editor state,\ncalling `f` for each of them. Note that, if the document changed\nsince the diagnostics were created, the `Diagnostic` object will\nhold the original outdated position, whereas the `to` and `from`\narguments hold the diagnostic's current position.\n*/\nfunction forEachDiagnostic(state, f) {\n  let lState = state.field(lintState, false);\n  if (lState && lState.diagnostics.size) {\n    let pending = [],\n      pendingStart = [],\n      lastEnd = -1;\n    for (let iter = RangeSet.iter([lState.diagnostics]);; iter.next()) {\n      for (let i = 0; i < pending.length; i++) if (!iter.value || iter.value.spec.diagnostics.indexOf(pending[i]) < 0) {\n        f(pending[i], pendingStart[i], lastEnd);\n        pending.splice(i, 1);\n        pendingStart.splice(i--, 1);\n      }\n      if (!iter.value) break;\n      for (let d of iter.value.spec.diagnostics) if (pending.indexOf(d) < 0) {\n        pending.push(d);\n        pendingStart.push(iter.from);\n      }\n      lastEnd = iter.to;\n    }\n  }\n}\nexport { closeLintPanel, diagnosticCount, forEachDiagnostic, forceLinting, lintGutter, lintKeymap, linter, nextDiagnostic, openLintPanel, previousDiagnostic, setDiagnostics, setDiagnosticsEffect };","map":{"version":3,"names":["Decoration","showPanel","EditorView","ViewPlugin","gutter","showTooltip","hoverTooltip","getPanel","logException","WidgetType","GutterMarker","StateEffect","StateField","Facet","combineConfig","RangeSet","RangeSetBuilder","elt","SelectedDiagnostic","constructor","from","to","diagnostic","LintState","diagnostics","panel","selected","init","state","diagnosticFilter","facet","lintConfig","markerFilter","sorted","slice","sort","a","b","deco","active","pos","i","next","length","reduce","p","d","Math","min","push","sev","maxSeverity","some","doc","lineAt","add","widget","DiagnosticWidget","markClass","c","mark","class","inclusiveEnd","splice","set","finish","findDiagnostic","arguments","undefined","after","found","between","_ref","spec","indexOf","hideTooltip","tr","tooltip","end","result","hideOn","line","startState","effects","e","is","setDiagnosticsEffect","changes","touchesRange","max","maybeEnableLint","field","lintState","concat","appendConfig","of","lintExtensions","setDiagnostics","define","togglePanel","movePanelSelection","create","none","update","value","docChanged","size","mapped","map","selPos","mapPos","autoPanel","effect","LintPanel","open","provide","f","val","decorations","s","diagnosticCount","lint","activeMark","lintTooltip","view","side","start","_ref2","tooltipFilter","above","dom","diagnosticsTooltip","renderDiagnostic","openLintPanel","dispatch","querySelector","focus","closeLintPanel","nextDiagnostic","sel","selection","main","iter","anchor","head","scrollIntoView","previousDiagnostic","prevFrom","prevTo","lastFrom","lastTo","lintKeymap","key","run","preventDefault","lintPlugin","fromClass","timeout","delay","lintTime","Date","now","bind","setTimeout","clearTimeout","sources","batchResults","Promise","resolve","annotations","error","config","needsRefresh","force","destroy","promises","sink","collected","then","combine","input","Object","assign","source","filter","x","u","linter","forceLinting","plugin","assignKeys","actions","assigned","name","ch","test","toLowerCase","inPanel","_a","keys","severity","renderMessage","message","action","fired","click","apply","keyIndex","nameElt","type","onclick","onmousedown","eq","other","toDOM","PanelItem","id","floor","random","toString","setAttribute","items","onkeydown","event","keyCode","moveSelection","selectedIndex","toUpperCase","charCodeAt","contains","target","list","tabIndex","role","phrase","needsSync","newSelectedItem","seen","Set","_start","_end","_ref3","has","item","j","hasAttribute","removeAttribute","pop","requestMeasure","read","getBoundingClientRect","write","_ref4","scaleY","height","offsetHeight","top","scrollTop","bottom","sync","domPos","firstChild","rm","prev","nextSibling","remove","parentNode","insertBefore","svg","content","attrs","encodeURIComponent","underline","color","baseTheme","padding","marginLeft","display","whiteSpace","borderLeft","font","border","backgroundColor","borderRadius","cursor","fontSize","opacity","backgroundPosition","backgroundRepeat","paddingBottom","backgroundImage","margin","position","left","borderRight","borderBottom","borderBottomColor","maxHeight","overflowY","textDecoration","background_fallback","color_fallback","right","background","severityWeight","weight","w","LintGutterMarker","document","createElement","className","diagnosticsFilter","lintGutterConfig","onmouseover","gutterMarkerMouseOver","trackHoverOn","marker","mousemove","rect","clientX","clientY","nodeType","classList","window","removeEventListener","lintGutterTooltip","setLintGutterTooltip","addEventListener","hovered","elementAtHeight","documentTop","linePos","coordsAtPos","clip","getCoords","onmouseout","onmousemove","hoverTime","hoverTimeout","markersForDiagnostics","byLine","markers","range","lintGutterExtension","lintGutterMarkers","widgetMarker","block","empty","t","lintGutterTheme","width","compute","configs","lintGutter","forEachDiagnostic","lState","pending","pendingStart","lastEnd"],"sources":["/Users/darkest.illusionist/Desktop/guviprojectnewlatest/frontend/node_modules/@codemirror/lint/dist/index.js"],"sourcesContent":["import { Decoration, showPanel, EditorView, ViewPlugin, gutter, showTooltip, hoverTooltip, getPanel, logException, WidgetType, GutterMarker } from '@codemirror/view';\nimport { StateEffect, StateField, Facet, combineConfig, RangeSet, RangeSetBuilder } from '@codemirror/state';\nimport elt from 'crelt';\n\nclass SelectedDiagnostic {\n    constructor(from, to, diagnostic) {\n        this.from = from;\n        this.to = to;\n        this.diagnostic = diagnostic;\n    }\n}\nclass LintState {\n    constructor(diagnostics, panel, selected) {\n        this.diagnostics = diagnostics;\n        this.panel = panel;\n        this.selected = selected;\n    }\n    static init(diagnostics, panel, state) {\n        // Filter the list of diagnostics for which to create markers\n        let diagnosticFilter = state.facet(lintConfig).markerFilter;\n        if (diagnosticFilter)\n            diagnostics = diagnosticFilter(diagnostics, state);\n        let sorted = diagnostics.slice().sort((a, b) => a.from - b.from || a.to - b.to);\n        let deco = new RangeSetBuilder(), active = [], pos = 0;\n        for (let i = 0;;) {\n            let next = i == sorted.length ? null : sorted[i];\n            if (!next && !active.length)\n                break;\n            let from, to;\n            if (active.length) {\n                from = pos;\n                to = active.reduce((p, d) => Math.min(p, d.to), next && next.from > from ? next.from : 1e8);\n            }\n            else {\n                from = next.from;\n                to = next.to;\n                active.push(next);\n                i++;\n            }\n            while (i < sorted.length) {\n                let next = sorted[i];\n                if (next.from == from && (next.to > next.from || next.to == from)) {\n                    active.push(next);\n                    i++;\n                    to = Math.min(next.to, to);\n                }\n                else {\n                    to = Math.min(next.from, to);\n                    break;\n                }\n            }\n            let sev = maxSeverity(active);\n            if (active.some(d => d.from == d.to || (d.from == d.to - 1 && state.doc.lineAt(d.from).to == d.from))) {\n                deco.add(from, from, Decoration.widget({\n                    widget: new DiagnosticWidget(sev),\n                    diagnostics: active.slice()\n                }));\n            }\n            else {\n                let markClass = active.reduce((c, d) => d.markClass ? c + \" \" + d.markClass : c, \"\");\n                deco.add(from, to, Decoration.mark({\n                    class: \"cm-lintRange cm-lintRange-\" + sev + markClass,\n                    diagnostics: active.slice(),\n                    inclusiveEnd: active.some(a => a.to > to)\n                }));\n            }\n            pos = to;\n            for (let i = 0; i < active.length; i++)\n                if (active[i].to <= pos)\n                    active.splice(i--, 1);\n        }\n        let set = deco.finish();\n        return new LintState(set, panel, findDiagnostic(set));\n    }\n}\nfunction findDiagnostic(diagnostics, diagnostic = null, after = 0) {\n    let found = null;\n    diagnostics.between(after, 1e9, (from, to, { spec }) => {\n        if (diagnostic && spec.diagnostics.indexOf(diagnostic) < 0)\n            return;\n        if (!found)\n            found = new SelectedDiagnostic(from, to, diagnostic || spec.diagnostics[0]);\n        else if (spec.diagnostics.indexOf(found.diagnostic) < 0)\n            return false;\n        else\n            found = new SelectedDiagnostic(found.from, to, found.diagnostic);\n    });\n    return found;\n}\nfunction hideTooltip(tr, tooltip) {\n    let from = tooltip.pos, to = tooltip.end || from;\n    let result = tr.state.facet(lintConfig).hideOn(tr, from, to);\n    if (result != null)\n        return result;\n    let line = tr.startState.doc.lineAt(tooltip.pos);\n    return !!(tr.effects.some(e => e.is(setDiagnosticsEffect)) || tr.changes.touchesRange(line.from, Math.max(line.to, to)));\n}\nfunction maybeEnableLint(state, effects) {\n    return state.field(lintState, false) ? effects : effects.concat(StateEffect.appendConfig.of(lintExtensions));\n}\n/**\nReturns a transaction spec which updates the current set of\ndiagnostics, and enables the lint extension if if wasn't already\nactive.\n*/\nfunction setDiagnostics(state, diagnostics) {\n    return {\n        effects: maybeEnableLint(state, [setDiagnosticsEffect.of(diagnostics)])\n    };\n}\n/**\nThe state effect that updates the set of active diagnostics. Can\nbe useful when writing an extension that needs to track these.\n*/\nconst setDiagnosticsEffect = /*@__PURE__*/StateEffect.define();\nconst togglePanel = /*@__PURE__*/StateEffect.define();\nconst movePanelSelection = /*@__PURE__*/StateEffect.define();\nconst lintState = /*@__PURE__*/StateField.define({\n    create() {\n        return new LintState(Decoration.none, null, null);\n    },\n    update(value, tr) {\n        if (tr.docChanged && value.diagnostics.size) {\n            let mapped = value.diagnostics.map(tr.changes), selected = null, panel = value.panel;\n            if (value.selected) {\n                let selPos = tr.changes.mapPos(value.selected.from, 1);\n                selected = findDiagnostic(mapped, value.selected.diagnostic, selPos) || findDiagnostic(mapped, null, selPos);\n            }\n            if (!mapped.size && panel && tr.state.facet(lintConfig).autoPanel)\n                panel = null;\n            value = new LintState(mapped, panel, selected);\n        }\n        for (let effect of tr.effects) {\n            if (effect.is(setDiagnosticsEffect)) {\n                let panel = !tr.state.facet(lintConfig).autoPanel ? value.panel : effect.value.length ? LintPanel.open : null;\n                value = LintState.init(effect.value, panel, tr.state);\n            }\n            else if (effect.is(togglePanel)) {\n                value = new LintState(value.diagnostics, effect.value ? LintPanel.open : null, value.selected);\n            }\n            else if (effect.is(movePanelSelection)) {\n                value = new LintState(value.diagnostics, value.panel, effect.value);\n            }\n        }\n        return value;\n    },\n    provide: f => [showPanel.from(f, val => val.panel),\n        EditorView.decorations.from(f, s => s.diagnostics)]\n});\n/**\nReturns the number of active lint diagnostics in the given state.\n*/\nfunction diagnosticCount(state) {\n    let lint = state.field(lintState, false);\n    return lint ? lint.diagnostics.size : 0;\n}\nconst activeMark = /*@__PURE__*/Decoration.mark({ class: \"cm-lintRange cm-lintRange-active\" });\nfunction lintTooltip(view, pos, side) {\n    let { diagnostics } = view.state.field(lintState);\n    let found, start = -1, end = -1;\n    diagnostics.between(pos - (side < 0 ? 1 : 0), pos + (side > 0 ? 1 : 0), (from, to, { spec }) => {\n        if (pos >= from && pos <= to &&\n            (from == to || ((pos > from || side > 0) && (pos < to || side < 0)))) {\n            found = spec.diagnostics;\n            start = from;\n            end = to;\n            return false;\n        }\n    });\n    let diagnosticFilter = view.state.facet(lintConfig).tooltipFilter;\n    if (found && diagnosticFilter)\n        found = diagnosticFilter(found, view.state);\n    if (!found)\n        return null;\n    return {\n        pos: start,\n        end: end,\n        above: view.state.doc.lineAt(start).to < end,\n        create() {\n            return { dom: diagnosticsTooltip(view, found) };\n        }\n    };\n}\nfunction diagnosticsTooltip(view, diagnostics) {\n    return elt(\"ul\", { class: \"cm-tooltip-lint\" }, diagnostics.map(d => renderDiagnostic(view, d, false)));\n}\n/**\nCommand to open and focus the lint panel.\n*/\nconst openLintPanel = (view) => {\n    let field = view.state.field(lintState, false);\n    if (!field || !field.panel)\n        view.dispatch({ effects: maybeEnableLint(view.state, [togglePanel.of(true)]) });\n    let panel = getPanel(view, LintPanel.open);\n    if (panel)\n        panel.dom.querySelector(\".cm-panel-lint ul\").focus();\n    return true;\n};\n/**\nCommand to close the lint panel, when open.\n*/\nconst closeLintPanel = (view) => {\n    let field = view.state.field(lintState, false);\n    if (!field || !field.panel)\n        return false;\n    view.dispatch({ effects: togglePanel.of(false) });\n    return true;\n};\n/**\nMove the selection to the next diagnostic.\n*/\nconst nextDiagnostic = (view) => {\n    let field = view.state.field(lintState, false);\n    if (!field)\n        return false;\n    let sel = view.state.selection.main, next = field.diagnostics.iter(sel.to + 1);\n    if (!next.value) {\n        next = field.diagnostics.iter(0);\n        if (!next.value || next.from == sel.from && next.to == sel.to)\n            return false;\n    }\n    view.dispatch({ selection: { anchor: next.from, head: next.to }, scrollIntoView: true });\n    return true;\n};\n/**\nMove the selection to the previous diagnostic.\n*/\nconst previousDiagnostic = (view) => {\n    let { state } = view, field = state.field(lintState, false);\n    if (!field)\n        return false;\n    let sel = state.selection.main;\n    let prevFrom, prevTo, lastFrom, lastTo;\n    field.diagnostics.between(0, state.doc.length, (from, to) => {\n        if (to < sel.to && (prevFrom == null || prevFrom < from)) {\n            prevFrom = from;\n            prevTo = to;\n        }\n        if (lastFrom == null || from > lastFrom) {\n            lastFrom = from;\n            lastTo = to;\n        }\n    });\n    if (lastFrom == null || prevFrom == null && lastFrom == sel.from)\n        return false;\n    view.dispatch({ selection: { anchor: prevFrom !== null && prevFrom !== void 0 ? prevFrom : lastFrom, head: prevTo !== null && prevTo !== void 0 ? prevTo : lastTo }, scrollIntoView: true });\n    return true;\n};\n/**\nA set of default key bindings for the lint functionality.\n\n- Ctrl-Shift-m (Cmd-Shift-m on macOS): [`openLintPanel`](https://codemirror.net/6/docs/ref/#lint.openLintPanel)\n- F8: [`nextDiagnostic`](https://codemirror.net/6/docs/ref/#lint.nextDiagnostic)\n*/\nconst lintKeymap = [\n    { key: \"Mod-Shift-m\", run: openLintPanel, preventDefault: true },\n    { key: \"F8\", run: nextDiagnostic }\n];\nconst lintPlugin = /*@__PURE__*/ViewPlugin.fromClass(class {\n    constructor(view) {\n        this.view = view;\n        this.timeout = -1;\n        this.set = true;\n        let { delay } = view.state.facet(lintConfig);\n        this.lintTime = Date.now() + delay;\n        this.run = this.run.bind(this);\n        this.timeout = setTimeout(this.run, delay);\n    }\n    run() {\n        clearTimeout(this.timeout);\n        let now = Date.now();\n        if (now < this.lintTime - 10) {\n            this.timeout = setTimeout(this.run, this.lintTime - now);\n        }\n        else {\n            this.set = false;\n            let { state } = this.view, { sources } = state.facet(lintConfig);\n            if (sources.length)\n                batchResults(sources.map(s => Promise.resolve(s(this.view))), annotations => {\n                    if (this.view.state.doc == state.doc)\n                        this.view.dispatch(setDiagnostics(this.view.state, annotations.reduce((a, b) => a.concat(b))));\n                }, error => { logException(this.view.state, error); });\n        }\n    }\n    update(update) {\n        let config = update.state.facet(lintConfig);\n        if (update.docChanged || config != update.startState.facet(lintConfig) ||\n            config.needsRefresh && config.needsRefresh(update)) {\n            this.lintTime = Date.now() + config.delay;\n            if (!this.set) {\n                this.set = true;\n                this.timeout = setTimeout(this.run, config.delay);\n            }\n        }\n    }\n    force() {\n        if (this.set) {\n            this.lintTime = Date.now();\n            this.run();\n        }\n    }\n    destroy() {\n        clearTimeout(this.timeout);\n    }\n});\nfunction batchResults(promises, sink, error) {\n    let collected = [], timeout = -1;\n    for (let p of promises)\n        p.then(value => {\n            collected.push(value);\n            clearTimeout(timeout);\n            if (collected.length == promises.length)\n                sink(collected);\n            else\n                timeout = setTimeout(() => sink(collected), 200);\n        }, error);\n}\nconst lintConfig = /*@__PURE__*/Facet.define({\n    combine(input) {\n        return Object.assign({ sources: input.map(i => i.source).filter(x => x != null) }, combineConfig(input.map(i => i.config), {\n            delay: 750,\n            markerFilter: null,\n            tooltipFilter: null,\n            needsRefresh: null,\n            hideOn: () => null,\n        }, {\n            needsRefresh: (a, b) => !a ? b : !b ? a : u => a(u) || b(u)\n        }));\n    }\n});\n/**\nGiven a diagnostic source, this function returns an extension that\nenables linting with that source. It will be called whenever the\neditor is idle (after its content changed). If `null` is given as\nsource, this only configures the lint extension.\n*/\nfunction linter(source, config = {}) {\n    return [\n        lintConfig.of({ source, config }),\n        lintPlugin,\n        lintExtensions\n    ];\n}\n/**\nForces any linters [configured](https://codemirror.net/6/docs/ref/#lint.linter) to run when the\neditor is idle to run right away.\n*/\nfunction forceLinting(view) {\n    let plugin = view.plugin(lintPlugin);\n    if (plugin)\n        plugin.force();\n}\nfunction assignKeys(actions) {\n    let assigned = [];\n    if (actions)\n        actions: for (let { name } of actions) {\n            for (let i = 0; i < name.length; i++) {\n                let ch = name[i];\n                if (/[a-zA-Z]/.test(ch) && !assigned.some(c => c.toLowerCase() == ch.toLowerCase())) {\n                    assigned.push(ch);\n                    continue actions;\n                }\n            }\n            assigned.push(\"\");\n        }\n    return assigned;\n}\nfunction renderDiagnostic(view, diagnostic, inPanel) {\n    var _a;\n    let keys = inPanel ? assignKeys(diagnostic.actions) : [];\n    return elt(\"li\", { class: \"cm-diagnostic cm-diagnostic-\" + diagnostic.severity }, elt(\"span\", { class: \"cm-diagnosticText\" }, diagnostic.renderMessage ? diagnostic.renderMessage(view) : diagnostic.message), (_a = diagnostic.actions) === null || _a === void 0 ? void 0 : _a.map((action, i) => {\n        let fired = false, click = (e) => {\n            e.preventDefault();\n            if (fired)\n                return;\n            fired = true;\n            let found = findDiagnostic(view.state.field(lintState).diagnostics, diagnostic);\n            if (found)\n                action.apply(view, found.from, found.to);\n        };\n        let { name } = action, keyIndex = keys[i] ? name.indexOf(keys[i]) : -1;\n        let nameElt = keyIndex < 0 ? name : [name.slice(0, keyIndex),\n            elt(\"u\", name.slice(keyIndex, keyIndex + 1)),\n            name.slice(keyIndex + 1)];\n        return elt(\"button\", {\n            type: \"button\",\n            class: \"cm-diagnosticAction\",\n            onclick: click,\n            onmousedown: click,\n            \"aria-label\": ` Action: ${name}${keyIndex < 0 ? \"\" : ` (access key \"${keys[i]})\"`}.`\n        }, nameElt);\n    }), diagnostic.source && elt(\"div\", { class: \"cm-diagnosticSource\" }, diagnostic.source));\n}\nclass DiagnosticWidget extends WidgetType {\n    constructor(sev) {\n        super();\n        this.sev = sev;\n    }\n    eq(other) { return other.sev == this.sev; }\n    toDOM() {\n        return elt(\"span\", { class: \"cm-lintPoint cm-lintPoint-\" + this.sev });\n    }\n}\nclass PanelItem {\n    constructor(view, diagnostic) {\n        this.diagnostic = diagnostic;\n        this.id = \"item_\" + Math.floor(Math.random() * 0xffffffff).toString(16);\n        this.dom = renderDiagnostic(view, diagnostic, true);\n        this.dom.id = this.id;\n        this.dom.setAttribute(\"role\", \"option\");\n    }\n}\nclass LintPanel {\n    constructor(view) {\n        this.view = view;\n        this.items = [];\n        let onkeydown = (event) => {\n            if (event.keyCode == 27) { // Escape\n                closeLintPanel(this.view);\n                this.view.focus();\n            }\n            else if (event.keyCode == 38 || event.keyCode == 33) { // ArrowUp, PageUp\n                this.moveSelection((this.selectedIndex - 1 + this.items.length) % this.items.length);\n            }\n            else if (event.keyCode == 40 || event.keyCode == 34) { // ArrowDown, PageDown\n                this.moveSelection((this.selectedIndex + 1) % this.items.length);\n            }\n            else if (event.keyCode == 36) { // Home\n                this.moveSelection(0);\n            }\n            else if (event.keyCode == 35) { // End\n                this.moveSelection(this.items.length - 1);\n            }\n            else if (event.keyCode == 13) { // Enter\n                this.view.focus();\n            }\n            else if (event.keyCode >= 65 && event.keyCode <= 90 && this.selectedIndex >= 0) { // A-Z\n                let { diagnostic } = this.items[this.selectedIndex], keys = assignKeys(diagnostic.actions);\n                for (let i = 0; i < keys.length; i++)\n                    if (keys[i].toUpperCase().charCodeAt(0) == event.keyCode) {\n                        let found = findDiagnostic(this.view.state.field(lintState).diagnostics, diagnostic);\n                        if (found)\n                            diagnostic.actions[i].apply(view, found.from, found.to);\n                    }\n            }\n            else {\n                return;\n            }\n            event.preventDefault();\n        };\n        let onclick = (event) => {\n            for (let i = 0; i < this.items.length; i++) {\n                if (this.items[i].dom.contains(event.target))\n                    this.moveSelection(i);\n            }\n        };\n        this.list = elt(\"ul\", {\n            tabIndex: 0,\n            role: \"listbox\",\n            \"aria-label\": this.view.state.phrase(\"Diagnostics\"),\n            onkeydown,\n            onclick\n        });\n        this.dom = elt(\"div\", { class: \"cm-panel-lint\" }, this.list, elt(\"button\", {\n            type: \"button\",\n            name: \"close\",\n            \"aria-label\": this.view.state.phrase(\"close\"),\n            onclick: () => closeLintPanel(this.view)\n        }, \"×\"));\n        this.update();\n    }\n    get selectedIndex() {\n        let selected = this.view.state.field(lintState).selected;\n        if (!selected)\n            return -1;\n        for (let i = 0; i < this.items.length; i++)\n            if (this.items[i].diagnostic == selected.diagnostic)\n                return i;\n        return -1;\n    }\n    update() {\n        let { diagnostics, selected } = this.view.state.field(lintState);\n        let i = 0, needsSync = false, newSelectedItem = null;\n        let seen = new Set();\n        diagnostics.between(0, this.view.state.doc.length, (_start, _end, { spec }) => {\n            for (let diagnostic of spec.diagnostics) {\n                if (seen.has(diagnostic))\n                    continue;\n                seen.add(diagnostic);\n                let found = -1, item;\n                for (let j = i; j < this.items.length; j++)\n                    if (this.items[j].diagnostic == diagnostic) {\n                        found = j;\n                        break;\n                    }\n                if (found < 0) {\n                    item = new PanelItem(this.view, diagnostic);\n                    this.items.splice(i, 0, item);\n                    needsSync = true;\n                }\n                else {\n                    item = this.items[found];\n                    if (found > i) {\n                        this.items.splice(i, found - i);\n                        needsSync = true;\n                    }\n                }\n                if (selected && item.diagnostic == selected.diagnostic) {\n                    if (!item.dom.hasAttribute(\"aria-selected\")) {\n                        item.dom.setAttribute(\"aria-selected\", \"true\");\n                        newSelectedItem = item;\n                    }\n                }\n                else if (item.dom.hasAttribute(\"aria-selected\")) {\n                    item.dom.removeAttribute(\"aria-selected\");\n                }\n                i++;\n            }\n        });\n        while (i < this.items.length && !(this.items.length == 1 && this.items[0].diagnostic.from < 0)) {\n            needsSync = true;\n            this.items.pop();\n        }\n        if (this.items.length == 0) {\n            this.items.push(new PanelItem(this.view, {\n                from: -1, to: -1,\n                severity: \"info\",\n                message: this.view.state.phrase(\"No diagnostics\")\n            }));\n            needsSync = true;\n        }\n        if (newSelectedItem) {\n            this.list.setAttribute(\"aria-activedescendant\", newSelectedItem.id);\n            this.view.requestMeasure({\n                key: this,\n                read: () => ({ sel: newSelectedItem.dom.getBoundingClientRect(), panel: this.list.getBoundingClientRect() }),\n                write: ({ sel, panel }) => {\n                    let scaleY = panel.height / this.list.offsetHeight;\n                    if (sel.top < panel.top)\n                        this.list.scrollTop -= (panel.top - sel.top) / scaleY;\n                    else if (sel.bottom > panel.bottom)\n                        this.list.scrollTop += (sel.bottom - panel.bottom) / scaleY;\n                }\n            });\n        }\n        else if (this.selectedIndex < 0) {\n            this.list.removeAttribute(\"aria-activedescendant\");\n        }\n        if (needsSync)\n            this.sync();\n    }\n    sync() {\n        let domPos = this.list.firstChild;\n        function rm() {\n            let prev = domPos;\n            domPos = prev.nextSibling;\n            prev.remove();\n        }\n        for (let item of this.items) {\n            if (item.dom.parentNode == this.list) {\n                while (domPos != item.dom)\n                    rm();\n                domPos = item.dom.nextSibling;\n            }\n            else {\n                this.list.insertBefore(item.dom, domPos);\n            }\n        }\n        while (domPos)\n            rm();\n    }\n    moveSelection(selectedIndex) {\n        if (this.selectedIndex < 0)\n            return;\n        let field = this.view.state.field(lintState);\n        let selection = findDiagnostic(field.diagnostics, this.items[selectedIndex].diagnostic);\n        if (!selection)\n            return;\n        this.view.dispatch({\n            selection: { anchor: selection.from, head: selection.to },\n            scrollIntoView: true,\n            effects: movePanelSelection.of(selection)\n        });\n    }\n    static open(view) { return new LintPanel(view); }\n}\nfunction svg(content, attrs = `viewBox=\"0 0 40 40\"`) {\n    return `url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" ${attrs}>${encodeURIComponent(content)}</svg>')`;\n}\nfunction underline(color) {\n    return svg(`<path d=\"m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0\" stroke=\"${color}\" fill=\"none\" stroke-width=\".7\"/>`, `width=\"6\" height=\"3\"`);\n}\nconst baseTheme = /*@__PURE__*/EditorView.baseTheme({\n    \".cm-diagnostic\": {\n        padding: \"3px 6px 3px 8px\",\n        marginLeft: \"-1px\",\n        display: \"block\",\n        whiteSpace: \"pre-wrap\"\n    },\n    \".cm-diagnostic-error\": { borderLeft: \"5px solid #d11\" },\n    \".cm-diagnostic-warning\": { borderLeft: \"5px solid orange\" },\n    \".cm-diagnostic-info\": { borderLeft: \"5px solid #999\" },\n    \".cm-diagnostic-hint\": { borderLeft: \"5px solid #66d\" },\n    \".cm-diagnosticAction\": {\n        font: \"inherit\",\n        border: \"none\",\n        padding: \"2px 4px\",\n        backgroundColor: \"#444\",\n        color: \"white\",\n        borderRadius: \"3px\",\n        marginLeft: \"8px\",\n        cursor: \"pointer\"\n    },\n    \".cm-diagnosticSource\": {\n        fontSize: \"70%\",\n        opacity: .7\n    },\n    \".cm-lintRange\": {\n        backgroundPosition: \"left bottom\",\n        backgroundRepeat: \"repeat-x\",\n        paddingBottom: \"0.7px\",\n    },\n    \".cm-lintRange-error\": { backgroundImage: /*@__PURE__*/underline(\"#d11\") },\n    \".cm-lintRange-warning\": { backgroundImage: /*@__PURE__*/underline(\"orange\") },\n    \".cm-lintRange-info\": { backgroundImage: /*@__PURE__*/underline(\"#999\") },\n    \".cm-lintRange-hint\": { backgroundImage: /*@__PURE__*/underline(\"#66d\") },\n    \".cm-lintRange-active\": { backgroundColor: \"#ffdd9980\" },\n    \".cm-tooltip-lint\": {\n        padding: 0,\n        margin: 0\n    },\n    \".cm-lintPoint\": {\n        position: \"relative\",\n        \"&:after\": {\n            content: '\"\"',\n            position: \"absolute\",\n            bottom: 0,\n            left: \"-2px\",\n            borderLeft: \"3px solid transparent\",\n            borderRight: \"3px solid transparent\",\n            borderBottom: \"4px solid #d11\"\n        }\n    },\n    \".cm-lintPoint-warning\": {\n        \"&:after\": { borderBottomColor: \"orange\" }\n    },\n    \".cm-lintPoint-info\": {\n        \"&:after\": { borderBottomColor: \"#999\" }\n    },\n    \".cm-lintPoint-hint\": {\n        \"&:after\": { borderBottomColor: \"#66d\" }\n    },\n    \".cm-panel.cm-panel-lint\": {\n        position: \"relative\",\n        \"& ul\": {\n            maxHeight: \"100px\",\n            overflowY: \"auto\",\n            \"& [aria-selected]\": {\n                backgroundColor: \"#ddd\",\n                \"& u\": { textDecoration: \"underline\" }\n            },\n            \"&:focus [aria-selected]\": {\n                background_fallback: \"#bdf\",\n                backgroundColor: \"Highlight\",\n                color_fallback: \"white\",\n                color: \"HighlightText\"\n            },\n            \"& u\": { textDecoration: \"none\" },\n            padding: 0,\n            margin: 0\n        },\n        \"& [name=close]\": {\n            position: \"absolute\",\n            top: \"0\",\n            right: \"2px\",\n            background: \"inherit\",\n            border: \"none\",\n            font: \"inherit\",\n            padding: 0,\n            margin: 0\n        }\n    }\n});\nfunction severityWeight(sev) {\n    return sev == \"error\" ? 4 : sev == \"warning\" ? 3 : sev == \"info\" ? 2 : 1;\n}\nfunction maxSeverity(diagnostics) {\n    let sev = \"hint\", weight = 1;\n    for (let d of diagnostics) {\n        let w = severityWeight(d.severity);\n        if (w > weight) {\n            weight = w;\n            sev = d.severity;\n        }\n    }\n    return sev;\n}\nclass LintGutterMarker extends GutterMarker {\n    constructor(diagnostics) {\n        super();\n        this.diagnostics = diagnostics;\n        this.severity = maxSeverity(diagnostics);\n    }\n    toDOM(view) {\n        let elt = document.createElement(\"div\");\n        elt.className = \"cm-lint-marker cm-lint-marker-\" + this.severity;\n        let diagnostics = this.diagnostics;\n        let diagnosticsFilter = view.state.facet(lintGutterConfig).tooltipFilter;\n        if (diagnosticsFilter)\n            diagnostics = diagnosticsFilter(diagnostics, view.state);\n        if (diagnostics.length)\n            elt.onmouseover = () => gutterMarkerMouseOver(view, elt, diagnostics);\n        return elt;\n    }\n}\nfunction trackHoverOn(view, marker) {\n    let mousemove = (event) => {\n        let rect = marker.getBoundingClientRect();\n        if (event.clientX > rect.left - 10 /* Hover.Margin */ && event.clientX < rect.right + 10 /* Hover.Margin */ &&\n            event.clientY > rect.top - 10 /* Hover.Margin */ && event.clientY < rect.bottom + 10 /* Hover.Margin */)\n            return;\n        for (let target = event.target; target; target = target.parentNode) {\n            if (target.nodeType == 1 && target.classList.contains(\"cm-tooltip-lint\"))\n                return;\n        }\n        window.removeEventListener(\"mousemove\", mousemove);\n        if (view.state.field(lintGutterTooltip))\n            view.dispatch({ effects: setLintGutterTooltip.of(null) });\n    };\n    window.addEventListener(\"mousemove\", mousemove);\n}\nfunction gutterMarkerMouseOver(view, marker, diagnostics) {\n    function hovered() {\n        let line = view.elementAtHeight(marker.getBoundingClientRect().top + 5 - view.documentTop);\n        const linePos = view.coordsAtPos(line.from);\n        if (linePos) {\n            view.dispatch({ effects: setLintGutterTooltip.of({\n                    pos: line.from,\n                    above: false,\n                    clip: false,\n                    create() {\n                        return {\n                            dom: diagnosticsTooltip(view, diagnostics),\n                            getCoords: () => marker.getBoundingClientRect()\n                        };\n                    }\n                }) });\n        }\n        marker.onmouseout = marker.onmousemove = null;\n        trackHoverOn(view, marker);\n    }\n    let { hoverTime } = view.state.facet(lintGutterConfig);\n    let hoverTimeout = setTimeout(hovered, hoverTime);\n    marker.onmouseout = () => {\n        clearTimeout(hoverTimeout);\n        marker.onmouseout = marker.onmousemove = null;\n    };\n    marker.onmousemove = () => {\n        clearTimeout(hoverTimeout);\n        hoverTimeout = setTimeout(hovered, hoverTime);\n    };\n}\nfunction markersForDiagnostics(doc, diagnostics) {\n    let byLine = Object.create(null);\n    for (let diagnostic of diagnostics) {\n        let line = doc.lineAt(diagnostic.from);\n        (byLine[line.from] || (byLine[line.from] = [])).push(diagnostic);\n    }\n    let markers = [];\n    for (let line in byLine) {\n        markers.push(new LintGutterMarker(byLine[line]).range(+line));\n    }\n    return RangeSet.of(markers, true);\n}\nconst lintGutterExtension = /*@__PURE__*/gutter({\n    class: \"cm-gutter-lint\",\n    markers: view => view.state.field(lintGutterMarkers),\n    widgetMarker: (view, widget, block) => {\n        let diagnostics = [];\n        view.state.field(lintGutterMarkers).between(block.from, block.to, (from, to, value) => {\n            if (from > block.from && from < block.to)\n                diagnostics.push(...value.diagnostics);\n        });\n        return diagnostics.length ? new LintGutterMarker(diagnostics) : null;\n    }\n});\nconst lintGutterMarkers = /*@__PURE__*/StateField.define({\n    create() {\n        return RangeSet.empty;\n    },\n    update(markers, tr) {\n        markers = markers.map(tr.changes);\n        let diagnosticFilter = tr.state.facet(lintGutterConfig).markerFilter;\n        for (let effect of tr.effects) {\n            if (effect.is(setDiagnosticsEffect)) {\n                let diagnostics = effect.value;\n                if (diagnosticFilter)\n                    diagnostics = diagnosticFilter(diagnostics || [], tr.state);\n                markers = markersForDiagnostics(tr.state.doc, diagnostics.slice(0));\n            }\n        }\n        return markers;\n    }\n});\nconst setLintGutterTooltip = /*@__PURE__*/StateEffect.define();\nconst lintGutterTooltip = /*@__PURE__*/StateField.define({\n    create() { return null; },\n    update(tooltip, tr) {\n        if (tooltip && tr.docChanged)\n            tooltip = hideTooltip(tr, tooltip) ? null : Object.assign(Object.assign({}, tooltip), { pos: tr.changes.mapPos(tooltip.pos) });\n        return tr.effects.reduce((t, e) => e.is(setLintGutterTooltip) ? e.value : t, tooltip);\n    },\n    provide: field => showTooltip.from(field)\n});\nconst lintGutterTheme = /*@__PURE__*/EditorView.baseTheme({\n    \".cm-gutter-lint\": {\n        width: \"1.4em\",\n        \"& .cm-gutterElement\": {\n            padding: \".2em\"\n        }\n    },\n    \".cm-lint-marker\": {\n        width: \"1em\",\n        height: \"1em\"\n    },\n    \".cm-lint-marker-info\": {\n        content: /*@__PURE__*/svg(`<path fill=\"#aaf\" stroke=\"#77e\" stroke-width=\"6\" stroke-linejoin=\"round\" d=\"M5 5L35 5L35 35L5 35Z\"/>`)\n    },\n    \".cm-lint-marker-warning\": {\n        content: /*@__PURE__*/svg(`<path fill=\"#fe8\" stroke=\"#fd7\" stroke-width=\"6\" stroke-linejoin=\"round\" d=\"M20 6L37 35L3 35Z\"/>`),\n    },\n    \".cm-lint-marker-error\": {\n        content: /*@__PURE__*/svg(`<circle cx=\"20\" cy=\"20\" r=\"15\" fill=\"#f87\" stroke=\"#f43\" stroke-width=\"6\"/>`)\n    },\n});\nconst lintExtensions = [\n    lintState,\n    /*@__PURE__*/EditorView.decorations.compute([lintState], state => {\n        let { selected, panel } = state.field(lintState);\n        return !selected || !panel || selected.from == selected.to ? Decoration.none : Decoration.set([\n            activeMark.range(selected.from, selected.to)\n        ]);\n    }),\n    /*@__PURE__*/hoverTooltip(lintTooltip, { hideOn: hideTooltip }),\n    baseTheme\n];\nconst lintGutterConfig = /*@__PURE__*/Facet.define({\n    combine(configs) {\n        return combineConfig(configs, {\n            hoverTime: 300 /* Hover.Time */,\n            markerFilter: null,\n            tooltipFilter: null\n        });\n    }\n});\n/**\nReturns an extension that installs a gutter showing markers for\neach line that has diagnostics, which can be hovered over to see\nthe diagnostics.\n*/\nfunction lintGutter(config = {}) {\n    return [lintGutterConfig.of(config), lintGutterMarkers, lintGutterExtension, lintGutterTheme, lintGutterTooltip];\n}\n/**\nIterate over the marked diagnostics for the given editor state,\ncalling `f` for each of them. Note that, if the document changed\nsince the diagnostics were created, the `Diagnostic` object will\nhold the original outdated position, whereas the `to` and `from`\narguments hold the diagnostic's current position.\n*/\nfunction forEachDiagnostic(state, f) {\n    let lState = state.field(lintState, false);\n    if (lState && lState.diagnostics.size) {\n        let pending = [], pendingStart = [], lastEnd = -1;\n        for (let iter = RangeSet.iter([lState.diagnostics]);; iter.next()) {\n            for (let i = 0; i < pending.length; i++)\n                if (!iter.value || iter.value.spec.diagnostics.indexOf(pending[i]) < 0) {\n                    f(pending[i], pendingStart[i], lastEnd);\n                    pending.splice(i, 1);\n                    pendingStart.splice(i--, 1);\n                }\n            if (!iter.value)\n                break;\n            for (let d of iter.value.spec.diagnostics)\n                if (pending.indexOf(d) < 0) {\n                    pending.push(d);\n                    pendingStart.push(iter.from);\n                }\n            lastEnd = iter.to;\n        }\n    }\n}\n\nexport { closeLintPanel, diagnosticCount, forEachDiagnostic, forceLinting, lintGutter, lintKeymap, linter, nextDiagnostic, openLintPanel, previousDiagnostic, setDiagnostics, setDiagnosticsEffect };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}